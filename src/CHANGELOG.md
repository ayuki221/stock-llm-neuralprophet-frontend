# 更新日誌

## 2025-11-04 (v2.1) - 響應式優化與歷史數據分頁

### 新增功能

#### 1. 響應式佈局優化
- ✅ 修復手機版股票列表內容溢出問題
- ✅ 新增獨立的手機版佈局（使用 `md:` breakpoint）
- ✅ 手機版使用垂直堆疊佈局，避免水平滾動
- ✅ 桌面版保持原有的橫向佈局

#### 2. 歷史數據分頁功能
- ✅ 使用 Tabs 組件將歷史數據分為兩個標籤頁
- ✅ **量價資料**標籤：顯示開盤價、最高價、最低價、收盤價、成交量
- ✅ **三大法人**標籤：顯示外資、投信、自營商買賣超數據
- ✅ 提升手機使用體驗，減少表格欄位數量
- ✅ 表格支持橫向滾動（當螢幕寬度不足時）

#### 3. 股票詳細頁面響應式改進
- ✅ 桌面版：4欄網格佈局
- ✅ 手機版：2欄網格佈局，使用卡片樣式
- ✅ 所有文字自動適應螢幕大小
- ✅ 標題使用 `truncate` 防止溢出

### 界面改進

#### 手機版股票列表
```
┌─────────────────────────────┐
│ 台積電  2330           >    │
│ 目前股價                    │
│ 1,400                       │
│                             │
│ 預計股價 1    預計股價 2    │
│ 1,470         1,455         │
│ ▲ +5%         ▲ +3.93%      │
└─────────────────────────────┘
```

#### 手機版詳細頁面
```
┌───────────┬───────────┐
│ 目前股價  │ 平均變動  │
│ $1,400    │ +62       │
├───────────┼───────────┤
│ 預計股價1 │ 預計股價2 │
│ $1,470    │ $1,455    │
│ ▲ +5%     │ ▲ +3.93%  │
└───────────┴───────────┘
```

### 技術細節

#### 響應式類名
```tsx
// 桌面版顯示，手機版隱藏
<div className="hidden md:flex">...</div>

// 手機版顯示，桌面版隱藏
<div className="md:hidden">...</div>

// 響應式網格
<div className="grid grid-cols-2 md:grid-cols-4">...</div>
```

#### 分頁標籤實現
```tsx
<Tabs defaultValue="price">
  <TabsList>
    <TabsTrigger value="price">量價資料</TabsTrigger>
    <TabsTrigger value="investors">三大法人</TabsTrigger>
  </TabsList>
  <TabsContent value="price">...</TabsContent>
  <TabsContent value="investors">...</TabsContent>
</Tabs>
```

### 修改的檔案

1. `/components/StockList.tsx` - 新增響應式佈局
2. `/components/StockDetail.tsx` - 新增分頁和響應式佈局
3. `/CHANGELOG.md` - 更新文檔

### 用戶體驗改進

**手機使用者**
- ✅ 不再出現內容溢出和水平滾動
- ✅ 所有資訊清晰可見
- ✅ 歷史數據分頁減少表格複雜度
- ✅ 更符合手機瀏覽習慣

**桌面使用者**
- ✅ 保持原有的橫向佈局
- ✅ 一次可查看更多資訊
- ✅ 歷史數據可快速切換標籤

---

## 2025-11-04 (v2.0) - 雙預測模式與深色主題優化

### 新增功能

#### 1. 雙預測價格系統
- ✅ 新增兩種不同的預測方法
  - **預測方法 1**：第一種預測演算法的結果
  - **預測方法 2**：第二種預測演算法的結果
- ✅ 每個預測都有獨立的變動值和百分比
- ✅ 詳細頁面顯示兩個預測價格及其各自的漲跌幅
- ✅ 列表頁面並排顯示兩個預測結果
- ✅ 篩選功能現在考慮兩個預測方法（任一符合條件即顯示）

#### 2. 深色模式優化
- ✅ 背景色調整為深灰色 (#1a1a1a)
- ✅ 卡片背景為灰色 (#2a2a2a)
- ✅ 更柔和的對比度，減少眼睛疲勞
- ✅ 所有UI元素都適配新的配色方案

### 資料結構更新

#### Stock 類型定義
```typescript
interface Stock {
  code: string;
  name: string;
  currentPrice: number;
  predictedPrice1: number;      // 新增：預測方法1
  predictedPrice2: number;      // 新增：預測方法2
  change1: number;              // 新增：方法1的變動
  changePercent1: number;       // 新增：方法1的變動百分比
  change2: number;              // 新增：方法2的變動
  changePercent2: number;       // 新增：方法2的變動百分比
}
```

### 頁面更新

#### 股票列表頁
- 四欄顯示：股票名稱、目前股價、預計股價1、預計股價2
- 每個預測都顯示獨立的漲跌幅標籤
- 保持響應式設計，適配各種螢幕尺寸

#### 股票詳細頁
- 四欄佈局：目前股價、預計股價1、預計股價2、平均變動
- 每個預測價格都有獨立的趨勢圖標和百分比標籤
- 新增「平均變動」欄位，顯示兩個預測的平均值

### 篩選邏輯更新

現在篩選條件會檢查兩個預測方法：
- 如果**任一預測方法**符合上漲或下跌條件，股票就會被顯示
- 這樣可以捕捉到不同模型的預測信號

範例：
- 上漲滿足設定為 +5%
- 股票A：方法1預測 +7%，方法2預測 +2% → **顯示**（方法1符合）
- 股票B：方法1預測 +3%，方法2預測 +6% → **顯示**（方法2符合）
- 股票C：方法1預測 +2%，方法2預測 +1% → **不顯示**（都不符合）

### 模擬數據範例

```javascript
{
  code: "2330",
  name: "台積電",
  currentPrice: 1400,
  predictedPrice1: 1470,     // 方法1預測：上漲5%
  predictedPrice2: 1455,     // 方法2預測：上漲3.93%
  change1: 70,
  changePercent1: 5,
  change2: 55,
  changePercent2: 3.93
}
```

### 配色方案（深色模式）

```css
/* 主要背景 */
--background: #1a1a1a;        /* 深灰色背景 */

/* 卡片背景 */
--card: #2a2a2a;              /* 中灰色卡片 */

/* 次要背景和邊框 */
--muted: #3a3a3a;             /* 淺灰色 */
--border: #3a3a3a;
```

### 接入真實後端 API

後端 API 需要提供包含兩個預測價格的數據格式：

```json
{
  "success": true,
  "data": [
    {
      "code": "2330",
      "name": "台積電",
      "currentPrice": 1400,
      "predictedPrice1": 1470,
      "predictedPrice2": 1455,
      "change1": 70,
      "changePercent1": 5.0,
      "change2": 55,
      "changePercent2": 3.93
    }
  ],
  "timestamp": "2025-11-04T10:30:00Z"
}
```

### 修改的檔案

1. `/types/stock.ts` - 更新 Stock 介面
2. `/services/api.ts` - 更新模擬數據和篩選邏輯
3. `/components/StockList.tsx` - 重構以顯示兩個預測價格
4. `/components/StockDetail.tsx` - 更新詳細頁面佈局
5. `/styles/globals.css` - 優化深色模式配色
6. `/App.tsx` - 更新背景顏色

### 未來改進建議

1. **預測模型說明**
   - 在 UI 上標註每個預測方法的演算法名稱
   - 例如：「預測方法1 (LSTM)」、「預測方法2 (ARIMA)」

2. **信心度指標**
   - 為每個預測添加信心度百分比
   - 幫助用戶判斷預測的可靠性

3. **歷史準確度**
   - 顯示每個預測方法過去的準確率
   - 幫助用戶選擇更可靠的預測

4. **組合建議**
   - 基於兩個預測的綜合分析
   - 提供更智能的投資建議

---

**版本**: 2.0.0  
**日期**: 2025-11-04  
**作者**: AI Assistant
